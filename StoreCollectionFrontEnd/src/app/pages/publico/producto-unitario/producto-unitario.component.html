<div class="container py-5" *ngIf="!loading && producto; else cargando">
  <button class="btn-volver-flotante" routerLink="/catalogo">
    <i class="bi bi-arrow-left"></i>
  </button>

  <div class="row g-5 align-items-start">

    <!-- IMAGEN CON ZOOM + BADGES IGUALES QUE EN EL CARD -->
    <div class="col-lg-6 position-relative">
      <div class="imagen-zoom-container">
        ">
        <img 
          [src]="imagenUrl" 
          [alt]="producto.nombre" 
          class="img-principal">

        <div class="lupa">
          <img [src]="imagenZoom" class="img-lupa">
        </div>

        <!-- BADGE AGOTADO (igual que en el card -->
        @if (!hayStock) {
          <div class="badge-agotado pulse-animation" style="top: 15px; right: 15px; font-size: 1.1rem; padding: 10px 18px;">
            <i class="bi bi-bag-x-fill"></i>
            AGOTADO
          </div>
        }

        <!-- BADGE ÚLTIMAS UNIDADES -->
        @if (hayStock && stockActual <= 5 && stockActual > 0) {
          <div class="badge-ultimas" style="top: 15px; left: 15px; font-size: 1rem; padding: 8px 14px;">
            <i class="bi bi-fire"></i>
            ¡Últimas {{ stockActual }}!
          </div>
        }
      </div>
    </div>

    <!-- INFO DEL PRODUCTO - ESTILO TOTALMENTE IGUAL AL CARD -->
    <div class="col-lg-6">
      <div class="info-container" style="max-width: 500px; margin: 0 auto;">

        <!-- Categoría -->
        @if (producto.nombreCategoria) {
          <div class="categoria-chip mb-3">
            {{ producto.nombreCategoria }}
          </div>
        }

        <!-- Nombre del producto -->
        <h1 class="nombre" style="font-size: 2.2rem; font-weight: 700; margin-bottom: 1rem;">
          {{ producto.nombre }}
        </h1>

        <!-- Precio grande y elegante -->
        <div class="precio-wrapper mb-4" style="font-size: 2.5rem;">
          <span class="simbolo">S/</span>
          <span class="valor">{{ precio | number:'1.2-2' }}</span>
        </div>

        <!-- Estado de stock - igual que el card -->
        

        <!-- Acciones principales -->
        <div class="acciones-principales mt-5">

          <button 
            class="btn-whatsapp-gigante w-100 mb-3" 
            (click)="consultarWhatsApp()"
            [disabled]="!hayStock">
            <i class="bi bi-whatsapp"></i>
            Consultar por WhatsApp
          </button>

          <div class="d-flex gap-3">
            <button class="btn-secundario flex-fill" (click)="llamarAhora()">
              <i class="bi bi-telephone-fill"></i> Llamar ahora
            </button>
            <button class="btn-secundario flex-fill" (click)="abrirCotizacion()">
              <i class="bi bi-chat-text"></i> Pedir cotización
            </button>
          </div>
        </div>

        <!-- Info extra (opcional) -->
        <div class="mt-5 pt-4 border-top">
          <small class="text-muted">
            <i class="bi bi-truck"></i> Envíos a todo el Perú • 
            <i class="bi bi-shield-check"></i> Compra segura • 
            <i class="bi bi-headset"></i> Atención 24/7
          </small>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Loading -->
<ng-template #cargando>
  <div class="text-center py-5">
    <div class="spinner-border text-success" style="width:3rem;height:3rem;"></div>
    <p class="mt-3">Cargando producto...</p>
  </div>
</ng-template>