<div class="admin-layout" [class.sidebar-collapsed]="isSidebarCollapsed">

  <!-- Overlay móvil -->
  <div class="sidebar-overlay" *ngIf="isMobile && !isSidebarCollapsed" (click)="toggleSidebar()"></div>

  <!-- Sidebar -->
  <aside class="sidebar">
    <div class="sidebar-inner">

      <!-- Logo -->
      <div class="sidebar-header">
        <div class="logo-wrapper">
          <div class="logo-icon">
            <i class="bi bi-buildings"></i>
          </div>
          <div class="logo-text">
            <span class="fw-bold">Store Collection</span>
            <small class="text-muted d-block">Panel Admin</small>
          </div>
        </div>
      </div>

      <!-- Navegación -->
      <nav class="sidebar-nav mt-4">
        <a routerLink="/admin/dashboard"   routerLinkActive="active" class="nav-link"><i class="bi bi-speedometer2"></i><span>Dashboard</span></a>
        <a routerLink="/admin/stores"      routerLinkActive="active" class="nav-link"><i class="bi bi-shop"></i><span>Tiendas</span></a>
        <a routerLink="/admin/categories" routerLinkActive="active" class="nav-link"><i class="bi bi-grid-3x3-gap"></i><span>Categorías</span></a>
        <a routerLink="/admin/products"    routerLinkActive="active" class="nav-link"><i class="bi bi-box-seam"></i><span>Productos</span></a>
        <a routerLink="/admin/usuarios"    routerLinkActive="active" class="nav-link"><i class="bi bi-people"></i><span>Usuarios</span></a>
      </nav>

      <!-- Logout -->
      <div class="sidebar-footer">
        <button class="nav-link logout-btn" (click)="logout()">
          <i class="bi bi-box-arrow-right"></i>
          <span>Cerrar sesión</span>
        </button>
      </div>
    </div>

    <!-- Botón colapsar -->
    <button class="btn-collapse" (click)="toggleSidebar()" [title]="isSidebarCollapsed ? 'Expandir' : 'Colapsar'">
      <i class="bi" [class.bi-chevron-left]="!isSidebarCollapsed" [class.bi-chevron-right]="isSidebarCollapsed"></i>
    </button>
  </aside>

  <!-- Contenido principal -->
  <div class="main-content">

    <!-- Topbar -->
    <header class="topbar">
      <div class="container-fluid d-flex align-items-center justify-content-between px-4 py-3">

        <!-- Menú móvil -->
        <button class="btn-mobile-menu d-lg-none me-3" (click)="toggleSidebar()">
          <i class="bi bi-list fs-4"></i>
        </button>

        <!-- Título de página -->
        <h5 class="mb-0 fw-semibold text-dark">{{ pageTitle }}</h5>

        <!-- Usuario + Avatar -->
        <div class="d-flex align-items-center gap-3">
          <div class="text-end">
            <div class="fw-semibold text-dark">{{ auth.fullName() }}</div>
            <small class="text-muted">{{ auth.roleDisplay() }}</small>
          </div>

          <!-- Avatar con iniciales -->
          <div class="avatar">
            {{ auth.initials() }}
          </div>
        </div>
      </div>
    </header>

    <!-- Contenido de la ruta -->
    <main class="page-content">
      <router-outlet></router-outlet>
    </main>
  </div>
</div>