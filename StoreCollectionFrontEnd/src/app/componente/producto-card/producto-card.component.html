<div class="producto-card"
     [class.agotado]="!hayStock"
     data-aos="fade-up"
     data-aos-duration="800"
     data-aos-offset="100">

  <a [routerLink]="['producto', producto.slug]"
     class="producto-link"
     [attr.aria-label]="'Ver detalle de ' + producto.nombre">

    <!-- Imagen principal -->
    <div class="imagen-container">
      <img [src]="imagenUrl"
           [alt]="producto.nombre"
           class="producto-imagen"
           loading="lazy"
           decoding="async">

      <!-- Overlay sutil con botón -->
      <div class="imagen-overlay">
        <div class="btn-ver-detalle">
          <i class="bi bi-arrow-right-circle-fill"></i>
          <span>Ver detalle</span>
        </div>
      </div>

      <!-- Badge agotado -->
      @if (!hayStock) {
        <div class="badge badge-agotado">
          <i class="bi bi-bag-x-fill me-1"></i>
          AGOTADO
        </div>
      }

      <!-- Badge últimas unidades -->
      @if (hayStock && stock <= 5 && stock > 0) {
        <div class="badge badge-ultimas">
          <i class="bi bi-fire me-1"></i>
          ¡Últimas {{ stock }}!
        </div>
      }
    </div>

    <!-- Información del producto -->
    <div class="info-container">
      @if (nombreCategoria) {
        <div class="categoria-chip">
          {{ nombreCategoria }}
        </div>
      }

      <h3 class="nombre">{{ producto.nombre }}</h3>

      <div class="precio-wrapper">
        <span class="simbolo">S/</span>
        <span class="valor">{{ precio | number:'1.2-2' }}</span>
      </div>

      <div class="stock-status"
           [class.disponible]="hayStock"
           [class.no-disponible]="!hayStock">
        <i class="bi me-1"
           [ngClass]="hayStock ? 'bi-check-circle-fill' : 'bi-x-circle-fill'"></i>
        {{ hayStock ? 'Disponible' : 'Sin stock' }}
      </div>
    </div>
  </a>
</div>